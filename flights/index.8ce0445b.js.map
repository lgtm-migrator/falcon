{"mappings":"imBAsBA,IAAAA,EACAC,mFArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,KAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,MCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,qJCAzD,IAAAC,EAAAJ,EAAA,sBAGAK,SAASC,eAAe,OAAQC,UAAY,GAsB5C,MAAMC,EAAwC,IAAIC,IAElDD,EAAME,IAAI,QAAS,CACjBC,MAAO,mBACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,WAEpBP,EAAME,IAAI,UAAW,CACnBC,MAAO,cACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,QAClBC,UAAW,CACTC,KAAM,UACNC,KAAM,GAGNC,OAAQ,CAAC,IAAIC,KAAK,KAAM,GAAI,IAAIC,UAAW,IAAID,KAAK,KAAM,EAAG,GAAGC,WAGhEC,OAAQ,WACRC,MAAM,KAGVf,EAAME,IAAI,WAAY,CACpBC,MAAO,oBACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,YAClBC,UAAW,CACTC,KAAM,WACNC,KAAM,GACNC,OAAQ,CAAC,EAAG,KACZG,OAAQ,OAGZd,EAAME,IAAI,WAAY,CACpBC,MAAO,eACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,WAClBC,UAAW,CACTC,KAAM,WACNC,KAAM,GACNC,OAAQ,CAAC,EAAG,IACZG,OAAQ,SAGZd,EAAME,IAAI,WAAY,CACpBC,MAAO,iBACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,aAClBC,UAAW,CACTC,KAAM,WACNC,KAAM,GACNC,OAAQ,CAAC,EAAG,IACZG,OAAQ,SAyBZd,EAAME,IAAI,WAAY,CACpBC,MAAO,qBACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,WAClBC,UAAW,CACTC,KAAM,WACNC,KAAM,GACNC,OAAQ,CAAC,EAAG,KACZG,OAAQ,OAGZd,EAAME,IAAI,sBAAuB,CAC/BC,MAAO,yCACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,SAClBS,WAAY,CACV,CACEb,MAAO,kBACPM,KAAM,YACNC,KAAM,GACNC,OAAQ,EAAC,GAAK,IACdG,OAAQ,KAEV,CACEX,MAAO,gBACPM,KAAM,YACNC,KAAM,GACNC,OAAQ,EAAC,GAAK,IACdG,OAAQ,cCnIdG,EAAiB,IAAAC,IAAoB,MAAQ1B,EAAA,SAAA2B,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,WD2IpG,MAAMC,EAAK,IAAI5B,EAAA6B,QAAiCR,GAchD,MAAMS,IAASC,UAAUC,UAAUC,MAAK,SAExC,IAAIjC,EAAAkC,IAAI9B,EAAOwB,EAAI,CACjBO,OAAQ,CACNC,SAAU,OACNN,EACA,CACEM,SAAU,IACVC,eAAgB,IAChBC,gBAAiB,IACjBC,aAAc,IACdC,WAAY,aAEd,IAtKRC,OA6IIC,UA4BFC,GAAIC,IACF3C,SAASC,eAAe,WAAY2C,MAAMC,QAAU","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-18c28e805bbd0f0a.js","flights/index.ts","node_modules/@parcel/runtime-js/lib/runtime-240d689ae7b9b3c0.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"8gjNX\\\":\\\"index.8ce0445b.js\\\",\\\"86oEa\\\":\\\"flights-1m.8fe0d71e.arrow\\\",\\\"j3hbc\\\":\\\"index.2880c8b3.js\\\"}\"));","import { App, ArrowDB, Logger, Views } from \"../src\";\nimport { createElement } from \"./utils\";\n\ndocument.getElementById(\"app\")!.innerText = \"\";\n\ntype ViewName =\n  | \"DISTANCE\"\n  | \"DEP_TIME\"\n  | \"ARR_TIME\"\n  | \"AIR_TIME\"\n  | \"ARR_DELAY\"\n  | \"DEP_DELAY\"\n  | \"FL_DATE\"\n  | \"DEP_DELAY_ARR_DELAY\"\n  | \"COUNT\";\n\ntype DimensionName =\n  | \"ARR_DELAY\"\n  | \"ARR_TIME\"\n  | \"DISTANCE\"\n  | \"DEP_DELAY\"\n  | \"AIR_TIME\"\n  | \"DEP_TIME\"\n  | \"FL_DATE\";\n\nconst views: Views<ViewName, DimensionName> = new Map();\n\nviews.set(\"COUNT\", {\n  title: \"Flights selected\",\n  type: \"0D\",\n  el: createElement(\"count\")\n});\nviews.set(\"FL_DATE\", {\n  title: \"Flight Date\",\n  type: \"1D\",\n  el: createElement(\"date\"),\n  dimension: {\n    name: \"FL_DATE\",\n    bins: 25,\n    // note that months start at 0!\n    // extent: [new Date(2005, 11, 25).getTime(), new Date(2006, 1, 5).getTime()], // 10k\n    extent: [new Date(2005, 11, 25).getTime(), new Date(2006, 2, 5).getTime()], // 1m\n    // extent: [new Date(2006, 11, 10).getTime(), new Date(2007, 1, 10).getTime()], // 10m\n    // extent: [new Date(2005, 11, 29).getTime(), new Date(2006, 1, 5).getTime()], // 200k\n    format: \"%Y-%m-%d\",\n    time: true\n  }\n});\nviews.set(\"DISTANCE\", {\n  title: \"Distance in Miles\",\n  type: \"1D\",\n  el: createElement(\"distance\"),\n  dimension: {\n    name: \"DISTANCE\",\n    bins: 25,\n    extent: [0, 4000],\n    format: \"d\"\n  }\n});\nviews.set(\"ARR_TIME\", {\n  title: \"Arrival Time\",\n  type: \"1D\",\n  el: createElement(\"arrival\"),\n  dimension: {\n    name: \"ARR_TIME\",\n    bins: 24,\n    extent: [0, 24],\n    format: \".1f\"\n  }\n});\nviews.set(\"DEP_TIME\", {\n  title: \"Departure Time\",\n  type: \"1D\",\n  el: createElement(\"departure\"),\n  dimension: {\n    name: \"DEP_TIME\",\n    bins: 24,\n    extent: [0, 24],\n    format: \".1f\"\n  }\n});\n// views.set(\"DEP_DELAY\", {\n//   title: \"Departure Delay in Minutes\",\n//   type: \"1D\",\n//   el: createElement(\"dep_delay\"),\n//   dimension: {\n//     name: \"DEP_DELAY\",\n//     bins: 25,\n//     extent: [-20, 60],\n//     format: \".1f\"\n//   }\n// });\n// views.set(\"ARR_DELAY\", {\n//   title: \"Arrival Delay in Minutes\",\n//   type: \"1D\",\n//   el: createElement(\"arr_delay\"),\n//   dimension: {\n//     name: \"ARR_DELAY\",\n//     bins: 25,\n//     extent: [-20, 60],\n//     format: \".1f\"\n//   }\n// });\nviews.set(\"AIR_TIME\", {\n  title: \"Airtime in Minutes\",\n  type: \"1D\",\n  el: createElement(\"airtime\"),\n  dimension: {\n    name: \"AIR_TIME\",\n    bins: 25,\n    extent: [0, 500],\n    format: \"d\"\n  }\n});\nviews.set(\"DEP_DELAY_ARR_DELAY\", {\n  title: \"Arrival and Departure Delay in Minutes\",\n  type: \"2D\",\n  el: createElement(\"delay\"),\n  dimensions: [\n    {\n      title: \"Departure Delay\",\n      name: \"DEP_DELAY\",\n      bins: 25,\n      extent: [-20, 60],\n      format: \"d\"\n    },\n    {\n      title: \"Arrival Delay\",\n      name: \"ARR_DELAY\",\n      bins: 25,\n      extent: [-20, 60],\n      format: \"d\"\n    }\n  ]\n});\n\nconst url = require(\"../data/flights-1m.arrow\");\n// const url =\n//   \"https://media.githubusercontent.com/media/uwdata/flights-arrow/master/flights-10m.arrow\";\nconst db = new ArrowDB<ViewName, DimensionName>(url);\n\nlet logger: Logger<ViewName> | undefined;\n\n//=============\n// timeline vis logger\n\n// logger = new TimelineLogger(createElement(\"logs\"), views);\n\n//=============\n// simple logger as demo\n\n// logger = new SimpleLogger<ViewName>();\n\nconst iPad = !!navigator.userAgent.match(/iPad/i);\n\nnew App(views, db, {\n  config: {\n    barWidth: 600,\n    ...(iPad\n      ? {\n          barWidth: 450,\n          histogramWidth: 450,\n          histogramHeight: 120,\n          heatmapWidth: 300,\n          prefetchOn: \"mousedown\"\n        }\n      : {})\n  },\n  logger,\n  cb: _app => {\n    document.getElementById(\"loading\")!.style.display = \"none\";\n\n    //=============\n    // benchmark\n\n    // function animationframe() {\n    //   return new Promise(resolve => requestAnimationFrame(resolve));\n    // }\n\n    // async function benchmark() {\n    //   _app.prefetchView(\"AIR_TIME\", false);\n\n    //   console.time(\"Brushes\");\n    //   const step = 25;\n    //   for (let start = 0; start < 500; start += step) {\n    //     for (let end = start + step; end < 500 + step; end += step) {\n    //       _app\n    //         .getVegaView(\"AIR_TIME\")\n    //         .signal(\"brush\", [start, end])\n    //         .run();\n\n    //       await animationframe();\n    //     }\n    //   }\n    //   console.timeEnd(\"Brushes\");\n    // }\n\n    // window.setTimeout(benchmark, 1000);\n  }\n});\n","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"86oEa\")).toString();"],"names":["$21c209811a9b5a39$export$6503ec6e8aabbaf","$21c209811a9b5a39$export$f7ad0328861e2f03","$21c209811a9b5a39$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$c2Y2V","document","getElementById","innerText","$861ff76272fac348$var$views","Map","set","title","type","el","$7FriB","createElement","dimension","name","bins","extent","Date","getTime","format","time","dimensions","$e753041b470d9c20$exports","URL","resolve","import","meta","url","toString","$861ff76272fac348$var$db","ArrowDB","$861ff76272fac348$var$iPad","navigator","userAgent","match","App","config","barWidth","histogramWidth","histogramHeight","heatmapWidth","prefetchOn","logger","$861ff76272fac348$var$logger","cb","_app","style","display"],"version":3,"file":"index.8ce0445b.js.map"}