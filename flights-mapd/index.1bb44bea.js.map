{"mappings":"kgBAGAA,SAASC,eAAe,OAAQC,UAAY,GAsB5C,MAAMC,EAAwC,IAAIC,IAElDD,EAAME,IAAI,QAAS,CACjBC,MAAO,mBACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,WAEpBP,EAAME,IAAI,WAAY,CACpBC,MAAO,oBACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,YAClBC,UAAW,CACTC,KAAM,WACNC,KAAM,GACNC,OAAQ,CAAC,EAAG,KACZC,OAAQ,OAGZZ,EAAME,IAAI,WAAY,CACpBC,MAAO,eACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,WAClBC,UAAW,CACTC,KAAM,WACNC,KAAM,GACNC,OAAQ,CAAC,EAAG,IACZC,OAAQ,UAGZZ,EAAME,IAAI,WAAY,CACpBC,MAAO,iBACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,aAClBC,UAAW,CACTC,KAAM,WACNC,KAAM,GACNC,OAAQ,CAAC,EAAG,IACZC,OAAQ,UAGZZ,EAAME,IAAI,SAAU,CAClBC,MAAO,iBACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,QAClBC,UAAW,CACTC,KAAM,SACNC,KAAM,GAGNC,OAAQ,CAAC,IAAIE,KAAK,KAAM,EAAG,GAAGC,UAAWD,KAAKE,OAC9CH,OAAQ,iBACRI,MAAM,KAyBVhB,EAAME,IAAI,WAAY,CACpBC,MAAO,qBACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,WAClBC,UAAW,CACTC,KAAM,WACNC,KAAM,GACNC,OAAQ,CAAC,EAAG,KACZC,OAAQ,OAGZZ,EAAME,IAAI,sBAAuB,CAC/BC,MAAO,yCACPC,KAAM,KACNC,GAAIC,EAAAC,cAAc,SAClBU,WAAY,CACV,CACEd,MAAO,kBACPM,KAAM,YACNC,KAAM,GACNC,OAAQ,EAAC,GAAK,IACdC,OAAQ,KAEV,CACET,MAAO,gBACPM,KAAM,YACNC,KAAM,GACNC,OAAQ,EAAC,GAAK,IACdC,OAAQ,QAKd,MAAMM,EAAQ,IAAIjB,IAElBiB,EAAMhB,IAAI,YAAa,YACvBgB,EAAMhB,IACJ,WACA,wEAEFgB,EAAMhB,IACJ,WACA,wEAEFgB,EAAMhB,IAAI,WAAY,YACtBgB,EAAMhB,IAAI,YAAa,YACvBgB,EAAMhB,IAAI,WAAY,WAGtBgB,EAAMhB,IAAI,SAAU,4CAGpBF,EAAMmB,OAAO,UAEb,MAAMC,EAAK,IAAIC,EAAAC,OACb,CACEC,KAAM,iBACNC,GAAI,OACJC,KAAM,OACNC,SAAU,mBACVC,SAAU,QACVC,KAAM,KAER,sBACAV,GAsBF,IAAIG,EAAAQ,IAAI7B,EAAOoB,EAAI,CACjBU,OAAQ,CACNC,gBAAiB,IACjBC,aAAc,IACdC,cAAe,IACfC,SAAU,IACVC,aAAa,EACbC,wBAAyB,SACzBC,WAAY,aAEdC,GAAE,IAASzC,SAASC,eAAe,WAAYyC,MAAMC,QAAU","sources":["flights-mapd/index.ts"],"sourcesContent":["import { App, MapDDB, Views } from \"../src\";\nimport { createElement } from \"../flights/utils\";\n\ndocument.getElementById(\"app\")!.innerText = \"\";\n\ntype ViewName =\n  | \"DISTANCE\"\n  | \"DEP_TIME\"\n  | \"DEP_TS\"\n  | \"ARR_TIME\"\n  | \"AIR_TIME\"\n  | \"ARR_DELAY\"\n  | \"DEP_DELAY\"\n  | \"DEP_DELAY_ARR_DELAY\"\n  | \"COUNT\";\n\ntype DimensionName =\n  | \"ARR_DELAY\"\n  | \"ARR_TIME\"\n  | \"DISTANCE\"\n  | \"DEP_DELAY\"\n  | \"AIR_TIME\"\n  | \"DEP_TIME\"\n  | \"DEP_TS\";\n\nconst views: Views<ViewName, DimensionName> = new Map();\n\nviews.set(\"COUNT\", {\n  title: \"Flights selected\",\n  type: \"0D\",\n  el: createElement(\"count\")\n});\nviews.set(\"DISTANCE\", {\n  title: \"Distance in Miles\",\n  type: \"1D\",\n  el: createElement(\"distance\"),\n  dimension: {\n    name: \"DISTANCE\",\n    bins: 25,\n    extent: [0, 4000],\n    format: \"d\"\n  }\n});\nviews.set(\"ARR_TIME\", {\n  title: \"Arrival Time\",\n  type: \"1D\",\n  el: createElement(\"arrival\"),\n  dimension: {\n    name: \"ARR_TIME\",\n    bins: 24,\n    extent: [0, 24],\n    format: \".1~f\"\n  }\n});\nviews.set(\"DEP_TIME\", {\n  title: \"Departure Time\",\n  type: \"1D\",\n  el: createElement(\"departure\"),\n  dimension: {\n    name: \"DEP_TIME\",\n    bins: 24,\n    extent: [0, 24],\n    format: \".1~f\"\n  }\n});\nviews.set(\"DEP_TS\", {\n  title: \"Departure Date\",\n  type: \"1D\",\n  el: createElement(\"date\"),\n  dimension: {\n    name: \"DEP_TS\",\n    bins: 24,\n    // note that months start at 0!\n    // extent: [new Date(2007, 11, 31).getTime(), new Date(2009, 0, 1).getTime()], /// 7M\n    extent: [new Date(1987, 0, 1).getTime(), Date.now()], // 180M\n    format: \"%Y-%m-%d %H:%M\",\n    time: true\n  }\n});\n// views.set(\"DEP_DELAY\", {\n//   title: \"Departure Delay in Minutes\",\n//   type: \"1D\",\n//   el: createElement(\"dep_delay\"),\n//   dimension: {\n//     name: \"DEP_DELAY\",\n//     bins: 25,\n//     extent: [-20, 60],\n//     format: \".1~f\"\n//   }\n// });\n// views.set(\"ARR_DELAY\", {\n//   title: \"Arrival Delay in Minutes\",\n//   type: \"1D\",\n//   el: createElement(\"arr_delay\"),\n//   dimension: {\n//     name: \"ARR_DELAY\",\n//     bins: 25,\n//     extent: [-20, 60],\n//     format: \".1~f\"\n//   }\n// });\nviews.set(\"AIR_TIME\", {\n  title: \"Airtime in Minutes\",\n  type: \"1D\",\n  el: createElement(\"airtime\"),\n  dimension: {\n    name: \"AIR_TIME\",\n    bins: 25,\n    extent: [0, 500],\n    format: \"d\"\n  }\n});\nviews.set(\"DEP_DELAY_ARR_DELAY\", {\n  title: \"Arrival and Departure Delay in Minutes\",\n  type: \"2D\",\n  el: createElement(\"delay\"),\n  dimensions: [\n    {\n      title: \"Departure Delay\",\n      name: \"DEP_DELAY\",\n      bins: 25,\n      extent: [-20, 60],\n      format: \"d\"\n    },\n    {\n      title: \"Arrival Delay\",\n      name: \"ARR_DELAY\",\n      bins: 25,\n      extent: [-20, 60],\n      format: \"d\"\n    }\n  ]\n});\n\nconst names = new Map<DimensionName, string>();\n\nnames.set(\"ARR_DELAY\", \"arrdelay\");\nnames.set(\n  \"ARR_TIME\",\n  \"(cast(cast(arrtime as float) / 100 as int) + mod(arrtime, 100) / 60)\"\n);\nnames.set(\n  \"DEP_TIME\",\n  \"(cast(cast(deptime as float) / 100 as int) + mod(deptime, 100) / 60)\"\n);\nnames.set(\"DISTANCE\", \"distance\");\nnames.set(\"DEP_DELAY\", \"depdelay\");\nnames.set(\"AIR_TIME\", \"airtime\");\n\n//*  <- add or remove / to toggle\nnames.set(\"DEP_TS\", \"extract(epoch from dep_timestamp) * 1000\");\n\n// FIXME: the time view does not update correctly for the small dataset\nviews.delete(\"DEP_TS\");\n\nconst db = new MapDDB(\n  {\n    host: \"metis.mapd.com\",\n    db: \"mapd\",\n    user: \"mapd\",\n    password: \"HyperInteractive\",\n    protocol: \"https\",\n    port: 443\n  },\n  \"flights_donotmodify\",\n  names\n);\n\n/*/\n\nnames.set(\"DEP_TS\", \"extract(epoch from actual_dep_time_stamp) * 1000\");\n\nconst db = new MapDDB(\n  {\n    host: \"beast-azure.mapd.com\",\n    db: \"newflights\",\n    user: \"demouser\",\n    password: \"HyperInteractive\",\n    protocol: \"https\",\n    port: 443\n  },\n  \"flights\",\n  names\n);\n\n//**/\n\nnew App(views, db, {\n  config: {\n    histogramHeight: 130,\n    heatmapWidth: 320,\n    maxCircleSize: 500,\n    barWidth: 600,\n    interpolate: true,\n    progressiveInteractions: \"only2D\",\n    prefetchOn: \"mousedown\"\n  },\n  cb: () => (document.getElementById(\"loading\")!.style.display = \"none\")\n});\n\n// field names in flights_donotmodify:\n// [\"flight_year\", \"flight_month\", \"flight_dayofmonth\", \"flight_dayofweek\", \"deptime\", \"crsdeptime\", \"arrtime\", \"crsarrtime\", \"uniquecarrier\", \"flightnum\", \"tailnum\", \"actualelapsedtime\", \"crselapsedtime\", \"airtime\", \"arrdelay\", \"depdelay\", \"origin\", \"dest\", \"distance\", \"taxiin\", \"taxiout\", \"cancelled\", \"cancellationcode\", \"diverted\", \"carrierdelay\", \"weatherdelay\", \"nasdelay\", \"securitydelay\", \"lateaircraftdelay\", \"dep_timestamp\", \"arr_timestamp\", \"carrier_name\", \"plane_type\", \"plane_manufacturer\", \"plane_issue_date\", \"plane_model\", \"plane_status\", \"plane_aircraft_type\", \"plane_engine_type\", \"plane_year\", \"origin_name\", \"origin_city\", \"origin_state\", \"origin_country\", \"origin_lat\", \"origin_lon\", \"dest_name\", \"dest_city\", \"dest_state\", \"dest_country\", \"dest_lat\", \"dest_lon\", \"origin_merc_x\", \"origin_merc_y\", \"dest_merc_x\", \"dest_merc_y\"]\n\n// field names in flights:\n// [\"flight_year\", \"flight_mmonth\", \"flight_dayofmonth\", \"flight_dayofweek\", \"deptime\", \"crsdeptime\", \"arrtime\", \"crsarrtime\", \"uniquecarrier\", \"airline_id\", \"flightnum\", \"tail_num\", \"actualelapsedtime\", \"crsactualelapsedtime\", \"airtime\", \"arrdelay\", \"depdelay\", \"origin\", \"dest\", \"distance\", \"taxiin\", \"taxiout\", \"wheels_on\", \"wheels_off\", \"cancelled\", \"cancellationcode\", \"diverted\", \"carrierdelay\", \"weatherdelay\", \"nasdelay\", \"securitydelay\", \"lateaircraftdelay\", \"origin_airport_id\", \"origin_airport_id_seq\", \"origin_city\", \"origin_state_abr\", \"origin_state_name\", \"dest_airport_id\", \"dest_airport_id_seq\", \"dest_city\", \"dest_state_abr\", \"dest_state_name\", \"origin_world_area_code\", \"dest_world_area_code\", \"CRS_dep_time_stamp\", \"actual_dep_time_stamp\", \"carrier_name\", \"plane_type\", \"plane_manufacturer\", \"plane_issue_date\", \"plane_model\", \"plane_status\", \"plane_aircraft_type\", \"plane_engine_type\", \"plane_year\", \"origin_name\", \"origin_country\", \"origin_lat\", \"origin_lon\", \"dest_name\", \"dest_country\", \"dest_lat\", \"dest_lon\", \"aircraft_engine_num\", \"aircraft_weight\", \"aircraft_manufacturer_name\", \"aircraft_engine_horsepower\", \"aircraft_number_seats\", \"aircraft_engine_manufacturer\", \"aircraft_engine_model_name\", \"aircraft_engine_thrust\", \"aircraft_engine_type\", \"aircraft_category\", \"aircraft_type\", \"aircraft_model_name\", \"aircraft_max_speed_miles\"]\n"],"names":["document","getElementById","innerText","$c42f0b752ce0dd76$var$views","Map","set","title","type","el","$7FriB","createElement","dimension","name","bins","extent","format","Date","getTime","now","time","dimensions","$c42f0b752ce0dd76$var$names","delete","$c42f0b752ce0dd76$var$db","$c2Y2V","MapDDB","host","db","user","password","protocol","port","App","config","histogramHeight","heatmapWidth","maxCircleSize","barWidth","interpolate","progressiveInteractions","prefetchOn","cb","style","display"],"version":3,"file":"index.1bb44bea.js.map"}